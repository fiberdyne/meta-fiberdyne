--------------------------------------------------------------------------------------------------------
Fiberdyne Yocto Layer Setup
--------------------------------------------------------------------------------------------------------

This tutorial will guide you in setting up the meta-fiberdyne Yocto layer for the Poky build environment.
For all purposes, the Yocto root directory will be referred to as $WORK.


-------------
Prerequisites
-------------
ADSP Support should be provided by the kernel. Furthermore, audio must be able to be renedered to the codec directly from
ADSP.

1. To build the Linux kernel with ADSP support insert the line "file://adsp/0001-arm-porter_adsp-support.patch" 
   to the bitbake script "linux-renesas_3.10.bb" found in 
   ${TOPDIR}/../meta-renesas/meta-rcar-gen2/recipes-kernel/linux.
2. To support ADSP debug trace logs the configuration file "./linux-renesas/porter.cfg" shall contain 
   the line "CONFIG_DEBUG_FS=y"
3. Copy across the contents of kernelpatches folder to ${TOPDIR}/../meta-renesas/meta-rcar-gen2/recipes-kernel/linux/linux-renesas
4. Patch, build and deploy the new kernel.



-------------
Setup
-------------
1. Clone the meta-fiberdyne repository into $WORK:

   cd $WORK
   git clone ssh://git@alpha.fiberdyne.com.au:20122/yocto/meta-fiberdyne.git

2. Locate your Yocto bblayers configuration file at $WORK/build/conf/bblayers.conf and ensure that the 
   following lines areadded to the BBLAYERS variable:

       ${TOPDIR}/../meta-fiberdyne

   Locate your Yocto local configuration file at $WORK/build/conf/local.conf and ensure that the following
   lines are added to the IMAGE_INSTALL_append variable:
    
       fd-dsp \

3. Once your image is built, there will be three new commands which can be readily used:
      
   fd-dsp      - Run the main DSP background application
   fd-dsp-ui   - Run the DSP GUI application (requires fd-dsp to be running)
   fd-dsp-test - Run an audio test (required fd-dsp to be running)
  

4. You will need to ensure that Qt5 is also present, and the Boost C++ libraries.
   For instructions on installing these, visit http://elinux.org/R-Car/Boards/Yocto#Adding_Qt5_in_Yocto_image.
   



